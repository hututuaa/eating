<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>奶茶加点糖-新闻页</title>
    <link rel="stylesheet" href="../css/news.css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>


    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdn.bootcss.com/axios/0.19.0/axios.min.js"></script>
    <link rel="stylesheet" href="../font/iconfont.css">
    <link rel="stylesheet" href="https://unpkg.com/nprogress@0.2.0/nprogress.css"/>
</head>

<body>
    <!--头部 -->
    <div class="header">
        <div class="header-content">
            <div>
                <span class="iconfont iconnaichabeizi"></span>
                <span class="title">奶茶加点糖</span>
            </div>
            <div class="menu">
                <ul>
                    <li><a href="./Home.html">首页</a></li>
                    <li><a href="./News.html">新闻</a></li>
                    <li><a href="./About.html">关于我们</a></li>
                </ul>
            </div>
        </div>

    </div>
    <!-- 内容 -->
    <div style="display: none;margin: 100px auto;text-align: center;font-size: 30px;" id="loading">加载中.....</div>
    <div class="news" id = "news" style="display: block;">
        <div class="newsList">
            <h2 style="text-align: center;margin: 20px;font-weight: bold;">生活小常识</h2>
            <div id="boxIn">
                <a class="newsBox" class="thumbnail">
                    <img src="" alt="">
                    <div class="title">
                    </div>
                </a>
                <a class="newsBox">
                    <img src="" alt="">
                    <div class="title">
                    </div>
                </a>
                <a class="newsBox">
                    <img src="" alt="">
                    <div class="title">
                    </div>
                </a>
                <a class="newsBox">
                    <img src="" alt="">
                    <div class="title">
                    </div>
                </a>
                <a class="newsBox">
                    <img src="" alt="">
                    <div class="title">
                    </div>
                </a>
                <a class="newsBox">
                    <img src="" alt="">
                    <div class="title">
                    </div>
                </a>
            </div>
            <div class="page">
                <nav aria-label="Page navigation">
                    <ul class="pagination" id="pn">
                        <li><a href="#1" id='changePage'>1</a></li>
                        <li><a href="#2" id='changePage'>2</a></li>
                        <li><a href="#3" id='changePage'>3</a></li>

                    </ul>
                </nav>
            </div>
        </div>
    </div>

    </div>
    <!-- 底部 -->
    <div class="footer">
        <div class="footerContent">
            <div class="connect">
                <h4><span class="iconfont icondianhua"></span>联系我们</h4>
                <ul class="connectDetail">
                    <li class="iconfont icondizhi">&nbsp;福州市闽侯县上街镇中海寰宇</li>
                    <li class="iconfont iconyouxiang">&nbsp;hututu@qq.com</li>
                    <li class="iconfont icondianhua">&nbsp;400-123-4569</li>
                </ul>
            </div>
            <div class="saoma">
                <h4><span class="iconfont iconsaoma"></span>扫码进店</h4>
                <span>
                    <img src="../image/saoma.png" alt="" class="scan" id="scanImg">
                    <p style="width:80px;text-align: center;margin-top: 10px;">奶茶加点甜</p>
                </span>

            </div>
            <div class="notice">
                <h4><span class="iconfont iconguanzhu1"></span>关注我们</h4>
                <ul class="foot-subscript">
                    <li><a href="#"></a></li>
                    <li><a href="#" id="wx"></a></li>
                    <li><a href="#"></a></li>
                    <li><a href="#"></a></li>
                </ul><br>
            </div>

        </div>
    </div>
</body>
<script src="https://unpkg.com/nprogress@0.2.0/nprogress.js"></script>
<script>
    $(function () {
        function getPage(page) {
            const loadingBar = $(".loading-bar");
            NProgress.start();
            console.log(loadingBar)
            // 拿到数据之前 设置Loading状态true
            // $("#loading").css('display','block')
            // $("#news").css('display','none')

            //   console.log($("#loaing").css)
            axios.get('https://mock-api.com/Gzq27OgW.mock/list?page=' + page)
                .then(function (res) {
                    var resData = res.data;
                     $.each(resData, function (index, ele) {
                        $('.newsBox').eq(index).find('img').prop('src', ele.img)
                        $('.newsBox').eq(index).find('.title').html(ele.title)
                        $('.newsBox').eq(index).prop('href', `NewsDetail.html?id=${ele.id}`);

                    })
                    // $("#loading").css('display','none')
                    // $("#news").css('display','block')
                     // 拿到数据之后，设置loading状态false
                     NProgress.done();

                }).catch(function (res) {
                    console.log('error', res);
                    $("#loading").css('display','block')
                    NProgress.done();
                })
        }
        $('#pn li a').click(function () {
            
            $('.boxIn').html('');
            const pageNum = parseInt($(this).text())
            console.log(pageNum)
            getPage(pageNum);
           
            


        });
        getPage(1);
    })


</script>

</html>